;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; CITY_HALL BEHAVIOR ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

to-report city_hall-action
  if( sum [capacity - worker-quantity] of factories + sum [capacity - worker-quantity] of stores < count humans with [ work = nobody ])
  [
    let p one-of patches with [ lock = false and (area = "industry" or area = "store") ]
    if(p != nobody and founds > 10 * [cost] of p)
    [
      report "install-work"
    ]
  ]
  report "idle"
end

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; POLICE_STATION BEHAVIOR ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

to-report police_station-action
  ifelse(worker-quantity < capacity) [ report "recruit" ] [ report "idle" ]
end

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; FIRE_DEPARTMENT BEHAVIOR ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

to-report fire_department-action
  ifelse(worker-quantity < capacity) [ report "recruit" ] [ report "idle" ]
end

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; HOUSE BEHAVIOR ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

to-report house-action
  ;; to be written 
  report "idle"
end

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; FACTORY BEHAVIOR ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

to-report factory-action
  ifelse(worker-quantity < capacity) [ report "recruit" ] [ report "idle" ]
end

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; STORE BEHAVIOR ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

to-report store-action
  ifelse(worker-quantity < capacity) [ report "recruit" ] [ report "idle" ]
end

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; HUMAN BEHAVIOR ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

to-report human-action
  if (residence = nobody)
  [
    let h one-of houses-here with [ people-quantity < capacity ]
    ifelse(h != nobody)
    [ 
      report "install-house"
    ]
    [
      set h min-one-of houses in-radius blocksize with [ people-quantity < capacity ] [distance myself]
      ifelse (h != nobody)
      [
        face h
        report "move"
      ]
      [
        ifelse(area = "home" and lock = false and money > cost)
        [ 
          report "install-house"
        ]
        [
          let m money
          let p min-one-of patches in-radius blocksize with [ area = "home" and lock = false and cost < m ] [distance myself]
          if (p != nobody) 
          [ 
            face p
            report "move"
          ]
        ]
      ]
    ]
  ]
  
  let r one-of patches in-cone 2 180 with [ road? ]
  if (r = nobody) [ set r one-of patches in-radius 2 with [ road? ] ]
  ifelse (r != nobody) [ face r ] [ face min-one-of patches with [ road? ] [distance myself] ]
  report "move"
end

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
